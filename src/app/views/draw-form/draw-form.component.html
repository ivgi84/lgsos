<md-toolbar color="accent">
    <h2>Overlay Form</h2>
    <span class="spacer"></span>
    <div class="tools">
        <lgos-delete-tool [(list)]="elementsList" (delete)="onDelete($event)"></lgos-delete-tool>
    </div>
    <!-- <lgos-draw-tools [(list)]="elementsList"></lgos-draw-tools> -->
    <!-- <lgos-draw-tools [selectedEl]="selectedElement" ></lgos-draw-tools> -->
</md-toolbar>
<md-sidenav-container class="sidenav-container">
    <md-sidenav #sidenav class="sidenav" mode="side" opened="true">
        <div class="sidenav-content">
            <md-accordion class="side-panel">
                <md-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle="true">
                    <md-expansion-panel-header>
                        <md-panel-title>
                            Upload
                        </md-panel-title>
                        <md-panel-description>
                            Upload your files here
                        </md-panel-description>
                        <span class="spacer"></span>
                        <md-icon>file_upload</md-icon>
                    </md-expansion-panel-header>
                    <md-action-row class="lgos-side-panel-action-row">
                        <div class="side-upload-btn">
                            <input-file (onFileSelect)="onFileSelect($event)" [accept]="'image/*'"></input-file>
                        </div>
                    </md-action-row>
                </md-expansion-panel>
                <md-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle="true">
                    <md-expansion-panel-header>
                        <md-panel-title>
                            Layers
                        </md-panel-title>
                        <md-panel-description>
                            Set up layers order by dragging
                        </md-panel-description>
                        <span class="spacer"></span>
                        <md-icon>reorder</md-icon>
                    </md-expansion-panel-header>
                    <md-action-row>
                        <div class="thumbnails" #thumbnails lgosSortable [thumbnails]="elementsList" (updateOrder)="onOrderUpdate($event)">
                            <md-card [id]="elm.id" class="thumbnail-card" *ngFor="let elm of elementsList; let i = index;">
                                <md-card-content class="thumbnail-img">
                                    <img [src]="elm.src" alt="">
                                </md-card-content>
                                <md-card-title class="thumbnail-name">{{elm.id}}</md-card-title>
                            </md-card>
                        </div>
                    </md-action-row>
                </md-expansion-panel>
                <md-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle="true">
                    <md-expansion-panel-header>
                        <md-panel-title>
                            Free text
                        </md-panel-title>
                        <md-panel-description>
                            Add free text
                        </md-panel-description>
                        <span class="spacer"></span>
                        <md-icon>library_add</md-icon>
                    </md-expansion-panel-header>
                    <md-action-row>
                        <md-form-field class="lgos-input-full-width">
                            <textarea [(ngModel)]="userFreeText" placeholder="Your text" mdInput autocomplete="off"></textarea>
                        </md-form-field>
                    </md-action-row>
                    <md-action-row>
                        <button md-raised-button color="primary" (click)="addText()">Add text <md-icon>library_add</md-icon></button>
                    </md-action-row>
                </md-expansion-panel>
            </md-accordion>
        </div>
    </md-sidenav>
    <md-card class="draw-area" (click)="clearSelection()">
        <md-card-content>
            <div class="playground" #playground *ngIf="elementsList.length > 0">
                <div class="draggable-wrap" [style.zIndex]="elm.z" *ngFor="let elm of elementsList">
                    <img *ngIf="elm.type == 'upload'" (click)="elm.select($event)" [src]="elm.src" [ngClass]="{'isSelected':elm.isSelected}" alt="">
                    <p *ngIf="elm.type == 'userInput'" (click)="elm.select($event)" [style.width]="elm.width + 'px'" [style.height]="elm.height + 'px'" [ngClass]="{'isSelected':elm.isSelected}">
                        {{elm.text}}
                    </p>
                </div>
            </div>
        </md-card-content>
    </md-card>
</md-sidenav-container>