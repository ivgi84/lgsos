<md-toolbar color="accent">
    <h2>Overlay Form</h2>
    <span class="spacer"></span>
    <lgos-draw-tools [list]="elementsList"></lgos-draw-tools>
    <!-- <lgos-draw-tools [selectedEl]="selectedElement" ></lgos-draw-tools> -->
</md-toolbar>
<md-sidenav-container class="sidenav-container">
    <md-sidenav #sidenav class="sidenav" mode="side" opened="true">
        <div class="sidenav-content">
            <md-accordion class="side-panel">
                <md-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle="true">
                    <md-expansion-panel-header>
                        <md-panel-title>
                            Upload
                        </md-panel-title>
                        <md-panel-description>
                            Upload your files here
                        </md-panel-description>
                        <span class="spacer"></span>
                        <md-icon>file_upload</md-icon>
                    </md-expansion-panel-header>
                    <md-action-row class="lgos-side-panel-action-row">
                        <div class="side-upload-btn">
                            <input-file (onFileSelect)="onFileSelect($event)" [accept]="'image/*'"></input-file>
                        </div>
                    </md-action-row>
                </md-expansion-panel>
                <md-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle="true">
                    <md-expansion-panel-header>
                        <md-panel-title>
                            Layers
                        </md-panel-title>
                        <md-panel-description>
                            Set up layers order by dragging
                        </md-panel-description>
                        <span class="spacer"></span>
                        <md-icon>reorder</md-icon>
                    </md-expansion-panel-header>
                    <md-action-row>
                        <div class="thumbnails" #thumbnails lgosSortable [thumbnails]="uploadImgs" (updateOrder)="onOrderUpdate($event)">
                            <md-card [id]="elm.id" class="thumbnail-card" *ngFor="let elm of uploadImgs; let i = index;">
                                <md-card-content class="thumbnail-img">
                                    <img [src]="elm.src" alt="">
                                </md-card-content>
                                <md-card-title class="thumbnail-name">{{elm.id}}</md-card-title>
                            </md-card>
                        </div>
                    </md-action-row>
                </md-expansion-panel>
                <md-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle="true">
                    <md-expansion-panel-header>
                        <md-panel-title>
                            Free text
                        </md-panel-title>
                        <md-panel-description>
                            Add free text
                        </md-panel-description>
                        <span class="spacer"></span>
                        <md-icon>library_add</md-icon>
                    </md-expansion-panel-header>
                    <md-action-row>
                        <md-form-field class="lgos-input-full-width">
                            <textarea [(ngModel)]="userFreeText" placeholder="Your text" mdInput autocomplete="off"></textarea>
                        </md-form-field>
                    </md-action-row>
                    <md-action-row>
                        <button md-raised-button color="primary" (click)="addText()">Add text <md-icon>library_add</md-icon></button>
                    </md-action-row>
                </md-expansion-panel>
            </md-accordion>
            <!-- <md-tab-group class="side-tabs">
                <md-tab label="upload" class="side-tab">
                    <div class="side-upload-btn">
                        <input-file (onFileSelect)="onFileSelect($event)" [accept]="'image/*'"></input-file>
                    </div>
                </md-tab>
                <md-tab label="add text">
                    <div>
                        <md-form-field class="example-full-width">
                            <textarea rows="2" cols="50" mdInput autocomplete="off"></textarea>
                        </md-form-field>
                        <button md-raised-button color="primary">Add text</button>
                    </div>
                </md-tab>
                <md-tab label="Elements">
                    <div class="side-layers">
                        <div class="thumbnails" #thumbnails lgosSortable [thumbnails]="uploadImgs" (updateOrder)="onOrderUpdate($event)">
                            <md-card [id]="elm.id" class="thumbnail-card" *ngFor="let elm of uploadImgs; let i = index;">
                                <md-card-title>{{elm.id}}</md-card-title>
                                <md-card-content>
                                    <div class="thumbnail">
                                        <img [src]="elm.src" alt="">
                                    </div>
                                </md-card-content>
                            </md-card>
                        </div>
                    </div>
                </md-tab>
            </md-tab-group> -->
        </div>
    </md-sidenav>
    <md-card class="draw-area">
        <md-card-content>
            <div class="playground" #playground *ngIf="uploadImgs.length > 0">
                <div [style.zIndex]="elm.z" class="draggable-wrap" *ngFor="let elm of uploadImgs">
                    <img (click)="elm.select()" [src]="elm.src" alt="">
                </div>
                <div class="draggable-wrap" *ngFor="let input of userInputs; let i = index;" [style.zIndex]="input.z">
                    <p (click)="input.select()" [style.width]="input.width + 'px'" [style.height]="input.height + 'px'">
                        {{input.text}}
                    </p>
                </div>
            </div>
        </md-card-content>
    </md-card>
</md-sidenav-container>